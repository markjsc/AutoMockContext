version: 1.0.0.{build}
branches:
  only:
  - master
image: Visual Studio 2017
dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '{version}'
  package_version: '{version}'
  assembly_version: '{version}'
  file_version: '{version}'
  informational_version: '{version}'
build_script:
- cmd: dotnet build
test_script:
- cmd: >-
    dotnet test AutoMockHelper.Tests

    dotnet test AutoMockHelper.Samples.MSTest

    dotnet test AutoMockHelper.Samples.NUnit

    dotnet test AutoMockHelper.Samples.xUnit
after_test:
- cmd: dotnet pack AutoMockHelper.Core
artifacts:
- path: '**\*.nupkg'
deploy:
- provider: NuGet
  api_key:
    secure: RTLuX5RDfgWBz1BsMyyH+sVRVf/3Uj/VwNEWbSq8xMZYvwJX/U57k8s8YnMtTQkr
  skip_symbols: false
  artifact: /.*\.nupkg/